<div tal:define="weather view/get_weather;">


<dl class="portlet" id="portlet-meteo">
  <dt class="portletHeader">
    <a tal:attributes="href string: meteo_details"
       i18n:translate="portlet_heading">Weather</a>
  </dt>

  <dd class="portletItem odd"
      id="portlet-weather-location"
      tal:condition="weather/error | nothing">

    <div i18n:translate="portlet_error">
      No information available.
    </div>

  </dd>
  
  <dd class="portletItem even"
      id="portlet-meteo-location"
      tal:replace="nothing"
      tal:condition="not:weather/error|nothing">
    <a href=""
       alt="More details"
       title="More details"
       i18n:attributes="alt portlet_more_details;
                        title portlet_more_details;"
       tal:attributes="href string: /meteo_details"
       tal:content="weather/location">Location</a>
  </dd>
  

  <dd class="portletItem odd"
      id="portlet-meteo-multiple"
      tal:condition="not:weather/error|nothing">

    <table>
      <tal:loop repeat="dayData weather">
        <tr>
          <td class="meteoDay">
            <span tal:content="dayData/dayOfWeek" i18n:translate=""></span>
          </td>
          <td rowspan="2">
            <img src="" alt="" title=""
                 height="35" width="35"
                 tal:attributes="src dayData/iconUrl;
                                 alt dayData/iconAlternativeText;
                                 title dayData/iconAlternativeText" />
          </td>
        </tr>
        <tr>
          <td tal:define="maxTemp dayData/maxTemperature;
                          minTemp dayData/minTemperature">
            <span class="meteoBlue"
                  tal:content="structure minTemp">
            </span>&nbsp;&frasl;&nbsp;<span class="meteoRed"
                                            tal:content="structure maxTemp">
                                      </span>
          </td>
        </tr>
      </tal:loop>
    </table>
  </dd>

  <dd class="portletFooter discreet"
      id="portlet-meteo-legal"
      tal:condition="not: weather/error|nothing"
      i18n:translate="portlet_source">
    Source:
    <span i18n:name="aemet-link">
      <a href="http://www.aemet.es"
         title="Spanish State Meteorological Agency (www.aemet.es)"
         i18n:attributes="title aemet">AEMET</a>
    </span>
  </dd>


</dl>

</div>
